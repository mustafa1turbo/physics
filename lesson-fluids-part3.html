<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù‚Ø§Ø¹Ø¯Ø© Ø¨Ø§Ø³ÙƒØ§Ù„ ÙˆØ§Ù„Ù…ÙƒØ¨Ø³ Ø§Ù„Ù‡ÙŠØ¯Ø±ÙˆÙ„ÙŠÙƒÙŠ | Ù…Ù†ØµØ© Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;800;900&display=swap"
        rel="stylesheet">
    <style>
        * {
            font-family: 'Cairo', sans-serif;
            scroll-behavior: smooth;
        }

        body {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: white;
            min-height: 100vh;
            overflow-x: hidden;
        }

        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #1e293b;
        }

        ::-webkit-scrollbar-thumb {
            background: #3b82f6;
            border-radius: 4px;
        }

        .glass-panel {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        }

        .nav-sidebar {
            position: fixed;
            top: 80px;
            right: 20px;
            width: 260px;
            height: calc(100vh - 100px);
            overflow-y: auto;
            z-index: 40;
            transition: transform 0.3s ease;
        }

        @media (max-width: 1024px) {
            .nav-sidebar {
                transform: translateX(110%);
                background: #1e293b;
                right: 0;
                top: 0;
                height: 100vh;
                width: 280px;
                padding-top: 80px;
            }

            .nav-sidebar.active {
                transform: translateX(0);
            }
        }

        .nav-item {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            margin-bottom: 8px;
            border-radius: 12px;
            color: #94a3b8;
            transition: all 0.2s;
            cursor: pointer;
            border-right: 3px solid transparent;
            font-weight: 600;
        }

        .nav-item:hover,
        .nav-item.active {
            background: rgba(59, 130, 246, 0.1);
            color: #fff;
            border-right-color: #3b82f6;
        }

        .typing-dot {
            width: 6px;
            height: 6px;
            background: #94a3b8;
            border-radius: 50%;
            animation: bounce 1.4s infinite ease-in-out both;
        }

        .typing-dot:nth-child(1) {
            animation-delay: -0.32s;
        }

        .typing-dot:nth-child(2) {
            animation-delay: -0.16s;
        }

        @keyframes bounce {

            0%,
            80%,
            100% {
                transform: scale(0);
            }

            40% {
                transform: scale(1.0);
            }
        }

        .animate-fade-in {
            animation: fadeIn 0.3s ease-out forwards;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .canvas-wrapper {
            position: relative;
            background: #1e293b;
            /* Garage Floor Color */
            border-radius: 16px;
            border: 4px solid #475569;
            box-shadow: inset 0 0 50px rgba(0, 0, 0, 0.5);
            overflow: hidden;
        }

        .control-panel {
            background: #1e293b;
            border-radius: 16px;
            padding: 20px;
            border: 1px solid #334155;
        }

        .range-slider {
            -webkit-appearance: none;
            appearance: none;
            width: 100%;
            width: 100%;
            height: 12px;
            border-radius: 6px;
            background: #475569;
            outline: none;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.5);
        }

        .range-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #ef4444;
            /* Red Button */
            cursor: pointer;
            border: 4px solid #b91c1c;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
            transition: transform 0.1s;
        }

        .range-slider::-webkit-slider-thumb:active {
            transform: scale(0.9);
        }

        /* Pedagogical Badges */
        .badge-understand {
            background: linear-gradient(135deg, #4c1d95, #6d28d9);
            color: #e9d5ff;
            border: 1px solid #8b5cf6;
            padding: 4px 12px;
            border-radius: 99px;
            font-size: 0.8rem;
            font-weight: bold;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            box-shadow: 0 4px 12px rgba(109, 40, 217, 0.3);
            margin-bottom: 8px;
        }

        .badge-memo {
            background: linear-gradient(135deg, #1e40af, #2563eb);
            color: #dbeafe;
            border: 1px solid #60a5fa;
            padding: 4px 12px;
            border-radius: 99px;
            font-size: 0.8rem;
            font-weight: bold;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
            margin-bottom: 8px;
        }

        .trick-box {
            background: rgba(220, 38, 38, 0.1);
            border-right: 4px solid #ef4444;
            padding: 16px;
            border-radius: 8px;
            margin-top: 16px;
            position: relative;
        }

        .trick-box h5 {
            color: #f87171;
            font-weight: bold;
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            gap: 6px;
        }
    </style>
</head>

<body class="pb-20">

    <!-- Mobile Nav Toggle -->
    <button onclick="toggleNav()"
        class="fixed top-4 left-4 z-50 lg:hidden bg-slate-800 p-3 rounded-xl border border-slate-700 shadow-lg text-white">
        â˜° Ø§Ù„ÙÙ‡Ø±Ø³
    </button>

    <!-- Header -->
    <header
        class="fixed top-0 w-full z-30 bg-slate-900/95 backdrop-blur border-b border-slate-800 h-16 flex items-center px-6 justify-between shadow-lg">
        <div class="flex items-center gap-4">
            <a href="index.html" class="flex items-center gap-2 text-slate-400 hover:text-white transition">
                <span>â¬…ï¸</span> <span class="hidden md:inline font-bold">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
            </a>
            <div class="h-6 w-[1px] bg-slate-700 mx-2"></div>
            <h1 class="font-bold text-lg md:text-xl text-white">Ù‚Ø§Ø¹Ø¯Ø© Ø¨Ø§Ø³ÙƒØ§Ù„ ÙˆØ§Ù„Ù…ÙƒØ¨Ø³ Ø§Ù„Ù‡ÙŠØ¯Ø±ÙˆÙ„ÙŠÙƒÙŠ ğŸšœ</h1>
        </div>
        <div class="text-sm font-mono text-blue-400 bg-blue-900/20 px-3 py-1 rounded border border-blue-500/30">
            Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù†ÙŠ Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ
        </div>
    </header>

    <!-- Sidebar -->
    <nav class="nav-sidebar glass-panel" id="sidebar">
        <div class="p-4 border-b border-slate-700 mb-2">
            <h3 class="font-bold text-white">Ù…Ø­ØªÙˆÙŠØ§Øª Ø§Ù„Ø¯Ø±Ø³</h3>
        </div>
        <div onclick="scrollToSection('intro')" class="nav-item active">ğŸ’¡ Ù‚Ø§Ø¹Ø¯Ø© Ø¨Ø§Ø³ÙƒØ§Ù„</div>
        <div onclick="scrollToSection('press')" class="nav-item">ğŸ‹ï¸ Ø§Ù„Ù…ÙƒØ¨Ø³ Ø§Ù„Ù‡ÙŠØ¯Ø±ÙˆÙ„ÙŠÙƒÙŠ</div>
        <div onclick="scrollToSection('simulation')" class="nav-item">ğŸ® ÙˆØ±Ø´Ø© Ø§Ù„Ù…ÙŠÙƒØ§Ù†ÙŠÙƒØ§</div>
        <div onclick="scrollToSection('advanced')" class="nav-item">ğŸš€ Ø§Ù„ÙØ§Ø¦Ø¯Ø© Ø§Ù„Ø¢Ù„ÙŠØ© (Ù‡Ø§Ù…)</div>
        <div onclick="scrollToSection('quiz')" class="nav-item">ğŸ“ Ø§Ø®ØªØ¨Ø± Ù†ÙØ³Ùƒ</div>
    </nav>

    <!-- Main Content -->
    <main class="lg:mr-[280px] pt-24 px-4 md:px-8 max-w-5xl mx-auto">

        <!-- Intro -->
        <section id="intro" class="mb-16 scroll-mt-24">
            <div class="glass-panel p-8 text-center relative overflow-hidden">
                <div class="absolute -top-10 -left-10 w-40 h-40 bg-red-500/10 rounded-full blur-3xl"></div>
                <h2 class="text-4xl font-black mb-6">Ù‚Ø§Ø¹Ø¯Ø© Ø¨Ø§Ø³ÙƒØ§Ù„ (Pascal's Principle)</h2>

                <div class="bg-slate-800 p-6 rounded-2xl border-r-4 border-red-500 text-right max-w-3xl mx-auto">
                    <p class="text-xl leading-relaxed text-slate-200">
                        "Ø¹Ù†Ø¯ Ø§Ù„ØªØ£Ø«ÙŠØ± Ø¨Ø¶ØºØ· Ø¹Ù„Ù‰ Ø³Ø§Ø¦Ù„ Ù…Ø­Ø¨ÙˆØ³ ÙÙŠ Ø¥Ù†Ø§Ø¡ØŒ ÙØ¥Ù† Ø§Ù„Ø¶ØºØ· ÙŠÙ†ØªÙ‚Ù„ <span
                            class="text-yellow-400 font-bold">Ø¨ØªÙ…Ø§Ù…Ù‡</span> Ø¥Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø£Ø¬Ø²Ø§Ø¡ Ø§Ù„Ø³Ø§Ø¦Ù„ ÙˆØ¬Ø¯Ø±Ø§Ù† Ø§Ù„Ø¥Ù†Ø§Ø¡."
                    </p>
                    <div class="mt-4 flex justify-center">
                        <span class="badge-understand">ğŸ§  ÙÙ‡Ù… Ø¹Ù…ÙŠÙ‚: (Ø§Ù„Ø¶ØºØ· ÙŠÙ†ØªÙ‚Ù„ Ø¨ØªÙ…Ø§Ù…Ù‡)</span>
                    </div>
                </div>

                <div class="grid md:grid-cols-2 gap-4 mt-8">
                    <div class="bg-blue-900/20 p-4 rounded-xl border border-blue-500/30">
                        <h4 class="font-bold text-blue-300 mb-2">âœ… ÙŠÙ†Ø·Ø¨Ù‚ Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙˆØ§Ø¦Ù„</h4>
                        <p class="text-sm">Ù„Ø£Ù†Ù‡Ø§ ØºÙŠØ± Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ø§Ù†Ø¶ØºØ§Ø·.</p>
                    </div>
                    <div class="bg-red-900/20 p-4 rounded-xl border border-red-500/30">
                        <h4 class="font-bold text-red-300 mb-2">âŒ Ù„Ø§ ÙŠÙ†Ø·Ø¨Ù‚ Ø¹Ù„Ù‰ Ø§Ù„ØºØ§Ø²Ø§Øª</h4>
                        <p class="text-sm">Ù„Ø£Ù†Ù‡Ø§ ØªÙ†Ø¶ØºØ· ÙˆØªØ³ØªÙ‡Ù„Ùƒ Ø¬Ø²Ø¡ Ù…Ù† Ø§Ù„Ø´ØºÙ„.</p>
                    </div>
                </div>

                <!-- NEW: Student Dialogue -->
                <div class="mt-8 max-w-2xl mx-auto text-right">
                    <h4 class="text-lg font-bold text-purple-300 mb-4 text-center">ğŸ¤” Ø³Ø¤Ø§Ù„ Ø§Ù„Ø·Ø§Ù„Ø¨ Ø§Ù„Ø´Ø§Ø·Ø±</h4>
                    <div class="student-row chat-row">
                        <div class="chat-avatar">ğŸ§‘â€ğŸ“</div>
                        <div class="chat-bubble">
                            <p class="text-sm">ÙŠØ§ Ù…Ø³ØªØ±ØŒ Ø·Ø¨ Ù„ÙŠÙ‡ Ø§Ù„Ø¶ØºØ· "Ø¨ÙŠÙ†ØªÙ‚Ù„ Ø¨ØªÙ…Ø§Ù…Ù‡"ØŸ Ù…Ø´ Ø§Ù„Ù…ÙØ±ÙˆØ¶ Ø§Ù„Ø³Ø§Ø¦Ù„ ÙŠØ§ÙƒÙ„ Ø­Ø§Ø¬Ø© Ù…Ù†
                                Ø§Ù„Ø¶ØºØ·ØŸ ğŸ¤”</p>
                        </div>
                    </div>
                    <div class="teacher-row chat-row">
                        <div class="chat-avatar">ğŸ‘¨â€ğŸ«</div>
                        <div class="chat-bubble">
                            <p class="text-sm">Ø³Ø¤Ø§Ù„ Ø¹Ø¨Ù‚Ø±ÙŠ! ğŸ§  Ø§Ù„Ø³Ø§Ø¦Ù„ <strong class="text-yellow-400">"Ù…Ø´
                                    Ø¨ÙŠÙ†Ø¶ØºØ·"</strong>. ØªØ®ÙŠÙ„ Ø¥Ù†Ùƒ Ø¨ØªØ¶ØºØ· Ø¹Ù„Ù‰ ÙƒØ±Ø© Ø­Ø¯ÙŠØ¯ Ø¬Ø§Ù…Ø¯Ø©ØŒ Ø§Ù„Ù‚ÙˆØ© Ù‡ØªØªÙ†Ù‚Ù„ Ø²ÙŠ Ù…Ø§ Ù‡ÙŠ Ù„Ù„Ù†Ø§Ø­ÙŠØ©
                                Ø§Ù„ØªØ§Ù†ÙŠØ©!</p>
                            <p class="text-xs text-purple-300 mt-1">Ù„ÙƒÙ† Ø§Ù„ØºØ§Ø² Ø¨ÙŠÙ†Ø¶ØºØ·ØŒ ÙØ¨ÙŠÙ…ØªØµ Ø¬Ø²Ø¡ Ù…Ù† Ø§Ù„Ø¶ØºØ·. Ø¹Ø´Ø§Ù† ÙƒØ¯Ù‡
                                ÙØ±Ø§Ù…Ù„ Ø§Ù„Ø³ÙŠØ§Ø±Ø© Ø§Ù„Ù‡ÙŠØ¯Ø±ÙˆÙ„ÙŠÙƒÙŠØ© Ø¨ØªØ³ØªØ®Ø¯Ù… Ø²ÙŠØª Ù…Ø´ Ù‡ÙˆØ§Ø¡!</p>
                        </div>
                    </div>
                    <div class="student-row chat-row">
                        <div class="chat-avatar">ğŸ§‘â€ğŸ“</div>
                        <div class="chat-bubble">
                            <p class="text-sm">Ø°ÙƒÙŠ! ğŸ¤¯ Ø·Ø¨ Ø¥ÙŠÙ‡ Ø§Ù„ÙØ§ÙŠØ¯Ø© Ù…Ù† Ø§Ù„ÙƒÙ„Ø§Ù… Ø¯Ù‡ Ø¹Ù…Ù„ÙŠØ§Ù‹ØŸ</p>
                        </div>
                    </div>
                    <div class="teacher-row chat-row">
                        <div class="chat-avatar">ğŸ‘¨â€ğŸ«</div>
                        <div class="chat-bubble">
                            <p class="text-sm">Ø§Ù„ÙØ§ÙŠØ¯Ø©ØŸ ØªÙ‚Ø¯Ø± ØªØ±ÙØ¹ Ø¹Ø±Ø¨ÙŠØ© ÙˆØ²Ù†Ù‡Ø§ Ø·Ù† Ø¨Ø¥ÙŠØ¯Ùƒ Ø§Ù„ØµØºÙŠØ±Ø©! ğŸ¤¯ Ø¨Ø§Ø³ÙƒØ§Ù„ Ø¹Ø±ÙÙ†Ø§ Ù†Ø¹Ù…Ù„
                                <strong class="text-green-400">Ø§Ù„Ù…ÙƒØ¨Ø³ Ø§Ù„Ù‡ÙŠØ¯Ø±ÙˆÙ„ÙŠÙƒÙŠ</strong>ØŒ Ø§Ù„Ù„ÙŠ Ø¨ÙŠÙƒØ¨Ø± Ø§Ù„Ù‚ÙˆØ©.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Confused Student (Funny) -->
                <div class="mt-6 p-4 bg-red-900/20 rounded-xl border border-red-500/30">
                    <div class="student-row chat-row">
                        <div class="chat-avatar">ğŸ˜µ</div>
                        <div class="chat-bubble">
                            <p class="text-sm">ÙŠØ§ Ù…Ø³ØªØ± ÙŠØ¹Ù†ÙŠ Ù„Ùˆ Ø¶ØºØ·Øª Ø¨Ù€ 100 Ù†ÙŠÙˆØªÙ†ØŒ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ù‡ØªØ·Ù„Ø¹ Ø¨Ù€ 100 Ù†ÙŠÙˆØªÙ† Ø¨Ø±Ø¶Ùˆ! ğŸ’ª
                            </p>
                        </div>
                    </div>
                    <div class="teacher-row chat-row">
                        <div class="chat-avatar">ğŸ‘¨â€ğŸ«</div>
                        <div class="chat-bubble">
                            <p class="text-sm">Ù„Ø§ ÙŠØ§ Ø¨Ø·Ù„! ğŸ˜… Ù„Ùˆ Ø§Ù„Ù…ÙƒØ¨Ø³ Ø§Ù„ÙƒØ¨ÙŠØ± Ø£ÙƒØ¨Ø± 50 Ù…Ø±Ø©ØŒ Ù‡ØªØ·Ù„Ø¹ <strong
                                    class="text-yellow-400">5000 Ù†ÙŠÙˆØªÙ†!</strong></p>
                        </div>
                    </div>
                    <div class="student-row chat-row">
                        <div class="chat-avatar">ğŸ˜µ</div>
                        <div class="chat-bubble">
                            <p class="text-sm">ÙˆØ§Ø§Ø§Ùˆ! ÙŠØ¹Ù†ÙŠ ÙƒØ³Ø¨Ù†Ø§ Ø·Ø§Ù‚Ø© Ù…Ù† Ø§Ù„ÙØ§Ø¶ÙŠ! ğŸ‰</p>
                        </div>
                    </div>
                    <div class="teacher-row chat-row">
                        <div class="chat-avatar">ğŸ‘¨â€ğŸ«</div>
                        <div class="chat-bubble">
                            <p class="text-sm">Ù„Ø§ Ù„Ø§ Ù„Ø§! ğŸ˜‚ ÙƒØ³Ø¨Ù†Ø§ Ù‚ÙˆØ© Ø¨Ø³ Ø®Ø³Ø±Ù†Ø§ Ù…Ø³Ø§ÙØ©! Ø§Ù„Ø´ØºÙ„ = Ø§Ù„Ø´ØºÙ„ (Ù‚Ø§Ù†ÙˆÙ† Ø¨Ù‚Ø§Ø¡ Ø§Ù„Ø·Ø§Ù‚Ø©)!
                            </p>
                            <p class="text-xs text-purple-300 mt-1">ÙŠØ¹Ù†ÙŠ Ù„Ø§Ø²Ù… ØªØ­Ø±Ùƒ Ø¯Ø±Ø§Ø¹Ùƒ 50 Ø³Ù… Ø¹Ø´Ø§Ù† Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ØªØ·Ù„Ø¹ 1 Ø³Ù….
                                ğŸ“</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Hydraulic Press Theory -->
        <section id="press" class="mb-16 scroll-mt-24">
            <h2 class="text-3xl font-bold mb-6 border-r-4 border-yellow-500 pr-4">ğŸ‹ï¸ Ø§Ù„Ù…ÙƒØ¨Ø³ Ø§Ù„Ù‡ÙŠØ¯Ø±ÙˆÙ„ÙŠÙƒÙŠ</h2>

            <div class="glass-panel p-6">
                <div class="flex flex-col md:flex-row items-center gap-8">
                    <div class="flex-1">
                        <h3 class="text-2xl font-bold text-white mb-4">ÙÙƒØ±Ø© Ø§Ù„Ø¹Ù…Ù„ (ØªÙƒØ¨ÙŠØ± Ø§Ù„Ù‚ÙˆØ©)</h3>
                        <p class="text-slate-300 mb-4 leading-relaxed">
                            Ø²ÙŠ "Ø§Ù„Ø¹ØªÙ„Ø©" Ø¨Ø§Ù„Ø¸Ø¨Ø·! Ø¨ØªØ£Ø«Ø± Ø¨Ù‚ÙˆØ© ØµØºÙŠØ±Ø© ($F_1$) Ø¹Ù„Ù‰ Ù…ÙƒØ¨Ø³ ØµØºÙŠØ± ($A_1$)ØŒ ÙØ§Ù„Ø¶ØºØ· ÙŠÙ†ØªÙ‚Ù„ Ù„Ù„Ù…ÙƒØ¨Ø³
                            Ø§Ù„ÙƒØ¨ÙŠØ± ($A_2$) ÙˆÙŠØªØ­ÙˆÙ„ Ù„Ù‚ÙˆØ© Ø¬Ø¨Ø§Ø±Ø© ($F_2$) ØªÙ‚Ø¯Ø± ØªØ±ÙØ¹ Ø¹Ø±Ø¨ÙŠØ©!
                        </p>
                        <div
                            class="bg-slate-900 p-4 rounded-xl border border-slate-700 font-mono text-center text-xl dir-ltr">
                            P = Fâ‚/Aâ‚ = Fâ‚‚/Aâ‚‚
                        </div>
                    </div>
                    <div class="w-full md:w-1/3 bg-white/5 p-4 rounded-xl text-center">
                        <div class="text-4xl mb-2">ğŸœ â¡ï¸ ğŸ˜</div>
                        <p class="text-sm text-slate-400">Ù†Ù…Ù„Ø© ØªØ±ÙØ¹ ÙÙŠÙ„!</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Simulation (The Muscle) -->
        <section id="simulation" class="mb-16 scroll-mt-24">
            <h2 class="text-3xl font-bold mb-6 border-r-4 border-red-500 pr-4">ğŸ® ÙˆØ±Ø´Ø© Ø§Ù„Ù…ÙŠÙƒØ§Ù†ÙŠÙƒØ§ (Ø§Ø±ÙØ¹ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©)</h2>

            <div class="glass-panel p-4 md:p-6 border border-red-500/30">
                <div class="grid lg:grid-cols-12 gap-8">

                    <!-- Sim Canvas -->
                    <div class="lg:col-span-8">
                        <div class="canvas-wrapper h-[500px] relative">
                            <canvas id="pressCanvas"></canvas>
                        </div>
                    </div>

                    <!-- Controls -->
                    <div class="lg:col-span-4 space-y-6">
                        <div class="control-panel">
                            <h4 class="font-bold text-white mb-4">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…:</h4>

                            <div class="mb-6">
                                <label class="block text-sm font-bold text-slate-400 mb-2">Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙƒØ¨Ø³ Ø§Ù„ØµØºÙŠØ±
                                    (F1)</label>
                                <input type="range" id="forceSlider" min="0" max="100" step="1" value="0"
                                    class="range-slider">
                                <div class="flex justify-between text-xs mt-2 font-mono">
                                    <span class="text-slate-400">Ø¨Ø¯ÙˆÙ† Ù‚ÙˆØ©</span>
                                    <span class="text-red-400 font-bold">Max Force</span>
                                </div>
                            </div>

                            <div class="bg-black/40 p-4 rounded-xl border border-slate-600 space-y-3">
                                <h5 class="text-xs text-slate-500 font-bold mb-2">Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª:</h5>
                                <div class="flex justify-between items-center border-b border-slate-700 pb-2">
                                    <span class="text-xs text-slate-300">Ø§Ù„Ù‚ÙˆØ© Ø§Ù„Ù†Ø§ØªØ¬Ø© (F2)</span>
                                    <span class="text-lg font-mono text-green-400 dir-ltr" id="f2Val">0 N</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-xs text-slate-300">Ø§Ù„ÙØ§Ø¦Ø¯Ø© Ø§Ù„Ø¢Ù„ÙŠØ© (Î·)</span>
                                    <span class="text-lg font-mono text-yellow-400 dir-ltr">10x</span>
                                </div>
                            </div>

                            <div class="trick-box">
                                <h5>âš¡ Ø¥ÙˆØ¹Ù‰ ØªØªÙ„Ø®Ø¨Ø·!</h5>
                                <p class="text-xs text-slate-300">
                                    Ø§Ù„Ù‚ÙˆØ© Ø¨ØªØ²ÙŠØ¯ØŸ <strong class="text-green-400">Ø¢Ù‡</strong>.<br>
                                    Ø§Ù„Ø´ØºÙ„ (Ø§Ù„Ø·Ø§Ù‚Ø©) Ø¨ÙŠØ²ÙŠØ¯ØŸ <strong class="text-red-400">Ù„Ø£ØŒ Ù…Ø³ØªØ­ÙŠÙ„!</strong> (Ù‚Ø§Ù†ÙˆÙ† Ø¨Ù‚Ø§Ø¡
                                    Ø§Ù„Ø·Ø§Ù‚Ø©).<br>
                                    Ø§Ù„Ø´ØºÙ„ Ø§Ù„Ù…Ø¨Ø°ÙˆÙ„ = Ø§Ù„Ø´ØºÙ„ Ø§Ù„Ù†Ø§ØªØ¬.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
        </section>

        <!-- Advanced Tricks (Mechanical Advantage) -->
        <section id="advanced" class="mb-16 scroll-mt-24">
            <h2 class="text-3xl font-bold mb-6 border-r-4 border-green-500 pr-4">ğŸš€ Ø§Ù„ÙØ§Ø¦Ø¯Ø© Ø§Ù„Ø¢Ù„ÙŠØ© (Mechanical
                Advantage)</h2>

            <div class="glass-panel p-6 mb-8 relative overflow-hidden">
                <div class="absolute top-0 right-0 w-2 h-full bg-green-500"></div>

                <h3 class="text-xl font-bold text-white mb-4">Ù‚ÙˆØ§Ù†ÙŠÙ† Ø§Ù„ÙØ§Ø¦Ø¯Ø© Ø§Ù„Ø¢Ù„ÙŠØ© ($\eta$)</h3>
                <span class="badge-memo">ğŸ¦œ Ø¨ØµÙ…Ø¬Ø© Ø§Ù„Ù‚ÙˆØ§Ù†ÙŠÙ†</span>
                <p class="text-slate-300 mb-4">Ù‡ÙŠ Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„Ù„ÙŠ Ø¨Ù†ÙƒØ¨Ø± Ø¨ÙŠÙ‡Ø§ Ø§Ù„Ù‚ÙˆØ©. Ø¯Ø§ÙŠÙ…Ø§Ù‹ Ø£ÙƒØ¨Ø± Ù…Ù† Ø§Ù„ÙˆØ§Ø­Ø¯ Ø§Ù„ØµØ­ÙŠØ­.</p>

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-center font-mono dir-ltr text-lg">
                    <div class="bg-slate-800 p-3 rounded-lg border border-slate-600 text-green-400">
                        Î· = Fâ‚‚ / Fâ‚
                    </div>
                    <div class="bg-slate-800 p-3 rounded-lg border border-slate-600 text-blue-400">
                        Î· = Aâ‚‚ / Aâ‚
                    </div>
                    <div class="bg-slate-800 p-3 rounded-lg border border-slate-600 text-yellow-400">
                        Î· = Râ‚‚Â² / Râ‚Â²
                    </div>
                    <div class="bg-slate-800 p-3 rounded-lg border border-slate-600 text-red-400">
                        Î· = yâ‚ / yâ‚‚
                    </div>
                </div>
            </div>

            <!-- Warning Box -->
            <div class="bg-red-900/20 p-6 rounded-2xl border border-red-500/50">
                <h4 class="text-red-400 font-bold mb-2 flex items-center gap-2">
                    <span>âš¡</span> ØªØ­Ø°ÙŠØ± Ù‡Ø§Ù…: Ù‚Ø§Ù†ÙˆÙ† Ø¨Ù‚Ø§Ø¡ Ø§Ù„Ø·Ø§Ù‚Ø©
                </h4>
                <p class="text-slate-300 text-sm leading-loose">
                    Ø§Ù„Ù…ÙƒØ¨Ø³ Ù…Ø´ Ø¨ÙŠØ®Ù„Ù‚ Ø·Ø§Ù‚Ø© Ù…Ù† Ø§Ù„Ø¹Ø¯Ù…! ğŸš«<br>
                    Ø§Ù„Ø´ØºÙ„ Ø§Ù„Ù…Ø¨Ø°ÙˆÙ„ Ø¹Ù†Ø¯ Ø§Ù„Ù…ÙƒØ¨Ø³ Ø§Ù„ØµØºÙŠØ± = Ø§Ù„Ø´ØºÙ„ Ø§Ù„Ù†Ø§ØªØ¬ Ø¹Ù†Ø¯ Ø§Ù„Ù…ÙƒØ¨Ø³ Ø§Ù„ÙƒØ¨ÙŠØ± (ÙÙŠ Ø§Ù„Ù…ÙƒØ¨Ø³ Ø§Ù„Ù…Ø«Ø§Ù„ÙŠ).<br>
                    <span class="font-mono text-white bg-black/30 px-2 rounded">Workâ‚ = Workâ‚‚</span><br>
                    ÙŠØ¹Ù†ÙŠ Ø¥Ø­Ù†Ø§ Ø¨Ù†ÙƒØ³Ø¨ Ù‚ÙˆØ©ØŒ Ø¨Ø³ Ø¨Ù†Ø®Ø³Ø± Ù…Ø³Ø§ÙØ©. (Ù„Ø§Ø²Ù… ØªØ­Ø±Ùƒ Ø¯Ø±Ø§Ø¹Ùƒ ÙƒØªÙŠØ± Ø¹Ø´Ø§Ù† Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ØªØ·Ù„Ø¹ Ø­ØªØ© ØµØºÙŠØ±Ø©).
                </p>
            </div>
        </section>

        <!-- Quiz -->
        <section id="quiz" class="mb-16 scroll-mt-24">
            <div class="glass-panel p-8">
                <h2 class="text-2xl font-bold mb-6 text-center">ğŸ§  Ø§Ø®ØªØ¨Ø± ÙÙ‡Ù…Ùƒ</h2>
                <div id="quizArea" class="space-y-4 max-w-2xl mx-auto">
                    <!-- Loaded by JS -->
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="text-center py-8 border-t border-slate-700 text-slate-500">
            <p>Â© Ù…Ù†ØµØ© Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡ 2024</p>
            <a href="index.html"
                class="inline-block mt-4 px-6 py-2 bg-slate-800 rounded-full hover:bg-slate-700 transition">Ø§Ù„Ø¹ÙˆØ¯Ø©
                Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
        </footer>

    </main>

    <script>
        // --- Navigation ---
        function toggleNav() { document.getElementById('sidebar').classList.toggle('active'); }
        function scrollToSection(id) { document.getElementById(id).scrollIntoView({ behavior: 'smooth' }); }

        // --- Hydraulic Press Simulation ---
        const canvas = document.getElementById('pressCanvas');
        const ctx = canvas.getContext('2d');
        const slider = document.getElementById('forceSlider');

        // Physics Consts
        const AREA_RATIO = 10; // A2 = 10 * A1

        // State
        let inputForce = 0; // 0-100%
        let currentPiston1Y = 0;
        let currentPiston2Y = 0;
        let carY = 0;

        function initSim() {
            const container = canvas.parentElement;
            if (!container) return;
            canvas.width = container.clientWidth;
            canvas.height = container.clientHeight;
            // Init car position to resting state
            const pipeY = canvas.height - 100;
            carBodyY = (pipeY - 50) - 5;
            drawSim();
        }

        function drawSim() {
            const w = canvas.width;
            const h = canvas.height;
            ctx.clearRect(0, 0, w, h);

            // Layout
            const groundY = h - 50;
            const pipeY = h - 100;
            const p1X = w * 0.2; // Small piston
            const p2X = w * 0.7; // Large piston
            const p1W = 40;
            const p2W = 120; // 3x width ~ 9x area visually

            // Physics movement
            const maxStroke1 = 150;
            const stroke1 = (inputForce / 100) * maxStroke1;
            const stroke2 = stroke1 / AREA_RATIO;

            const p1Base = pipeY - 50;
            const p2Base = pipeY - 50;

            const p1Y = p1Base + stroke1; // Goes DOWN
            const p2Y = p2Base - stroke2; // Goes UP

            // 1. Draw Hydraulic Fluid (Oil)
            ctx.fillStyle = '#b45309'; // Dark Oil
            ctx.beginPath();
            ctx.fillRect(p1X - p1W / 2, p1Y, p1W, (pipeY - p1Y) + 20);
            ctx.fillRect(p2X - p2W / 2, pipeY - 20, p2W, (p2Y - (pipeY - 20)) + 200);
            ctx.fillRect(p1X, pipeY, p2X - p1X, 20);

            // 2. Draw Cylinders (Walls)
            ctx.strokeStyle = '#94a3b8';
            ctx.lineWidth = 6;
            ctx.lineCap = 'round';
            ctx.beginPath();
            ctx.moveTo(p1X - p1W / 2, p1Base - maxStroke1);
            ctx.lineTo(p1X - p1W / 2, pipeY);
            ctx.lineTo(p1X + p1W / 2, pipeY);
            ctx.lineTo(p1X + p1W / 2, p1Base - maxStroke1);
            ctx.moveTo(p2X - p2W / 2, p2Base - 100);
            ctx.lineTo(p2X - p2W / 2, pipeY);
            ctx.lineTo(p2X + p2W / 2, pipeY);
            ctx.lineTo(p2X + p2W / 2, p2Base - 100);
            ctx.stroke();

            // 3. Draw Pistons
            ctx.fillStyle = '#cbd5e1';
            ctx.fillRect(p1X - p1W / 2 + 2, p1Y - 10, p1W - 4, 10);
            ctx.fillStyle = '#64748b';
            ctx.fillRect(p1X - 5, p1Y - 100, 10, 90);
            ctx.fillStyle = '#ef4444';
            ctx.beginPath();
            ctx.roundRect(p1X - 20, p1Y - 110, 40, 10, 5);
            ctx.fill();
            ctx.fillStyle = '#cbd5e1';
            ctx.fillRect(p2X - p2W / 2 + 2, p2Y, p2W - 4, 15);
            ctx.fillStyle = '#64748b';
            ctx.fillRect(p2X - 10, p2Y - 10, 20, 10);

            // 4. Draw Car
            drawCar(ctx, p2X, carBodyY);

            // 5. Arrows
            if (inputForce > 0) {
                drawArrow(ctx, p1X, p1Y - 130, p1X, p1Y - 110, '#ef4444', `F1`);
                drawArrow(ctx, p2X + 80, p2Y + 50, p2X + 80, p2Y, '#22c55e', `F2 = 10Ã—F1`);
            }

            const f1 = inputForce;
            const f2 = f1 * AREA_RATIO;
            const f2El = document.getElementById('f2Val');
            if (f2El) f2El.innerText = f2 + " N";
        }

        function drawCar(ctx, x, y) {
            ctx.save();
            ctx.translate(x, y);
            ctx.fillStyle = '#1e293b';
            ctx.beginPath();
            ctx.arc(-40, -10, 15, 0, Math.PI * 2);
            ctx.arc(40, -10, 15, 0, Math.PI * 2);
            ctx.fill();
            ctx.fillStyle = '#3b82f6';
            ctx.beginPath();
            ctx.moveTo(-70, -10);
            ctx.lineTo(70, -10);
            ctx.lineTo(70, -30);
            ctx.lineTo(40, -60);
            ctx.lineTo(-40, -60);
            ctx.lineTo(-70, -30);
            ctx.closePath();
            ctx.fill();
            ctx.fillStyle = '#bfdbfe';
            ctx.beginPath();
            ctx.moveTo(-35, -55);
            ctx.lineTo(35, -55);
            ctx.lineTo(55, -35);
            ctx.lineTo(-55, -35);
            ctx.closePath();
            ctx.fill();
            ctx.restore();
        }

        function drawArrow(ctx, x1, y1, x2, y2, color, text) {
            ctx.beginPath();
            ctx.moveTo(x1, y1);
            ctx.lineTo(x2, y2);
            ctx.strokeStyle = color;
            ctx.lineWidth = 3;
            ctx.stroke();
            ctx.fillStyle = color;
            ctx.font = 'bold 12px Mono';
            ctx.fillText(text, x1 + 10, (y1 + y2) / 2);
        }

        let carBodyY = 0;
        let carVel = 0;
        let isSimRunning = false;
        let lastForce = -1;

        function updatePhysics() {
            const maxStroke1 = 150;
            const pipeY = canvas.height - 100;
            const p2Base = pipeY - 50;
            const stroke1 = (inputForce / 100) * maxStroke1;
            const stroke2 = stroke1 / AREA_RATIO;
            const targetY = (p2Base - stroke2) - 5;

            if (Math.abs(targetY - carBodyY) < 0.1 && Math.abs(carVel) < 0.1 && inputForce == lastForce) {
                carBodyY = targetY;
                drawSim();
                isSimRunning = false;
                return;
            }

            carVel += (targetY - carBodyY) * 0.1;
            carVel *= 0.85;
            carBodyY += carVel;
            drawSim();
            if (isSimRunning) requestAnimationFrame(updatePhysics);
        }

        slider?.addEventListener('input', (e) => {
            inputForce = parseInt(e.target.value);
            if (!isSimRunning) {
                isSimRunning = true;
                updatePhysics();
            }
            lastForce = inputForce;
        });

        const questions = [
            { q: "Ù‚Ø§Ø¹Ø¯Ø© Ø¨Ø§Ø³ÙƒØ§Ù„ ØªÙ†Ø·Ø¨Ù‚ ÙÙ‚Ø· Ø¹Ù„Ù‰...", opts: ["Ø§Ù„Ø³ÙˆØ§Ø¦Ù„", "Ø§Ù„ØºØ§Ø²Ø§Øª", "Ø§Ù„Ø¬ÙˆØ§Ù…Ø¯", "Ø§Ù„ÙØ±Ø§Øº"], ans: 0, exp: "Ù„Ø£Ù† Ø§Ù„Ø³ÙˆØ§Ø¦Ù„ ØºÙŠØ± Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ø§Ù†Ø¶ØºØ§Ø·ØŒ ÙØ§Ù„Ø¶ØºØ· Ø¨ÙŠÙ†ØªÙ‚Ù„ Ø¨ØªÙ…Ø§Ù…Ù‡." },
            { q: "ÙÙŠ Ø§Ù„Ù…ÙƒØ¨Ø³ Ø§Ù„Ù‡ÙŠØ¯Ø±ÙˆÙ„ÙŠÙƒÙŠØŒ Ø§Ù„ÙØ§Ø¦Ø¯Ø© Ø§Ù„Ø¢Ù„ÙŠØ© (Î·) Ø¯Ø§Ø¦Ù…Ø§Ù‹...", opts: ["Ø£Ù‚Ù„ Ù…Ù† 1", "ØªØ³Ø§ÙˆÙŠ 1", "Ø£ÙƒØ¨Ø± Ù…Ù† 1", "ØµÙØ±"], ans: 2, exp: "Ù„Ø£Ù† Ù…Ø³Ø§Ø­Ø© Ø§Ù„Ù…ÙƒØ¨Ø³ Ø§Ù„ÙƒØ¨ÙŠØ± Ø£ÙƒØ¨Ø± Ù…Ù† Ø§Ù„ØµØºÙŠØ±ØŒ ÙÙ‡Ø¯Ù Ø§Ù„Ø¢Ù„Ø© Ù‡Ùˆ ØªÙƒØ¨ÙŠØ± Ø§Ù„Ù‚ÙˆØ©." },
            { q: "Ø§Ù„Ø´ØºÙ„ Ø§Ù„Ù…Ø¨Ø°ÙˆÙ„ Ø¹Ù†Ø¯ Ø§Ù„Ù…ÙƒØ¨Ø³ Ø§Ù„ØµØºÙŠØ± ....... Ø§Ù„Ø´ØºÙ„ Ø§Ù„Ù†Ø§ØªØ¬ Ø¹Ù†Ø¯ Ø§Ù„ÙƒØ¨ÙŠØ± (ÙÙŠ Ø§Ù„Ù…ÙƒØ¨Ø³ Ø§Ù„Ù…Ø«Ø§Ù„ÙŠ).", opts: ["Ø£ÙƒØ¨Ø± Ù…Ù†", "ÙŠØ³Ø§ÙˆÙŠ", "Ø£Ù‚Ù„ Ù…Ù†", "Ø¶Ø¹Ù"], ans: 1, exp: "Ø§Ù„Ø·Ø§Ù‚Ø© Ù„Ø§ ØªÙÙ†Ù‰. Ø¥Ø­Ù†Ø§ Ø¨Ù†ÙƒØ³Ø¨ Ù‚ÙˆØ© Ø¨Ø³ Ø¨Ù†Ø®Ø³Ø± Ù…Ø³Ø§ÙØ©ØŒ ÙØ­Ø§ØµÙ„ Ø§Ù„Ø¶Ø±Ø¨ (Ø§Ù„Ø´ØºÙ„) Ø«Ø§Ø¨Øª." },
            { q: "Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù…Ø³Ø§Ø­Ø© Ø§Ù„Ù…ÙƒØ¨Ø³ Ø§Ù„ÙƒØ¨ÙŠØ± Ø¶Ø¹Ù Ø§Ù„ØµØºÙŠØ±ØŒ ÙØ¥Ù† Ø§Ù„Ù‚ÙˆØ© Ø§Ù„Ù†Ø§ØªØ¬Ø© ØªÙƒÙˆÙ†...", opts: ["Ø§Ù„Ø¶Ø¹Ù", "Ø§Ù„Ù†ØµÙ", "4 Ø£Ù…Ø«Ø§Ù„", "Ø§Ù„Ø±Ø¨Ø¹"], ans: 0, exp: "Ø§Ù„Ù‚ÙˆØ© ØªØªÙ†Ø§Ø³Ø¨ Ø·Ø±Ø¯ÙŠØ§Ù‹ Ù…Ø¹ Ø§Ù„Ù…Ø³Ø§Ø­Ø© ($F_2 = F_1 \\times \\eta$)." }
        ];

        function renderQuiz() {
            const area = document.getElementById('quizArea');
            if (!area) return;
            area.innerHTML = questions.map((q, i) => `
                <div class="bg-slate-800 p-4 rounded-xl border border-slate-700">
                    <p class="font-bold mb-3 text-white">${i + 1}. ${q.q}</p>
                    <div class="space-y-2">
                        ${q.opts.map((o, j) => `
                            <button onclick="checkAns(this, ${i}, ${j})" class="w-full text-right p-3 rounded bg-slate-700 hover:bg-slate-600 transition border border-transparent">${o}</button>
                        `).join('')}
                    </div>
                    <div id="feed-${i}" class="hidden mt-3 text-sm p-3 rounded"></div>
                </div>
            `).join('');
        }

        function checkAns(btn, qIdx, optIdx) {
            const q = questions[qIdx];
            const feed = document.getElementById(`feed-${qIdx}`);
            const parent = btn.parentElement;
            if (!feed || !parent) return;
            Array.from(parent.children).forEach(b => b.disabled = true);

            if (optIdx === q.ans) {
                btn.classList.add('bg-green-600');
                feed.className = "mt-3 text-sm p-3 rounded bg-green-900/50 text-green-200 block";
                feed.innerHTML = "âœ… <b>ØµØ­!</b> " + q.exp;
            } else {
                btn.classList.add('bg-red-600');
                feed.className = "mt-3 text-sm p-3 rounded bg-red-900/50 text-red-200 block";
                feed.innerHTML = "âŒ <b>ØºÙ„Ø·.</b> Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ù‡ÙŠ: " + q.opts[q.ans];
            }
        }

        window.onload = function () {
            initSim();
            renderQuiz();
        };
        window.onresize = initSim;
    </script>

    <!-- AI Sidebar -->
    <div id="aiSidebarContainer">
        <button onclick="toggleAI()"
            class="fixed bottom-6 left-6 z-50 bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-4 rounded-full shadow-2xl hover:scale-110 transition-transform flex items-center gap-2 border-2 border-white/20">
            <span class="text-2xl">ğŸ§ª</span><span class="font-bold hidden md:inline">Ø§Ø³Ø£Ù„ Ø¯Ø§Ù„ØªÙˆÙ†</span>
        </button>
        <div id="aiSidebar"
            class="fixed top-0 left-0 h-full w-full md:w-[350px] bg-slate-900/95 backdrop-blur-xl border-r border-slate-700 transform -translate-x-full transition-transform duration-300 z-[60] shadow-2xl flex flex-col">
            <div class="p-4 border-b border-slate-700 flex items-center justify-between bg-slate-900">
                <div class="flex items-center gap-2">
                    <span class="text-2xl">ğŸ§ª</span>
                    <div>
                        <h3 class="font-bold text-white">Ø¯Ø§Ù„ØªÙˆÙ† ğŸ§ª</h3>
                        <div class="flex items-center gap-1 text-[10px] text-green-400">
                            <span class="w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"></span> Ù…ØªØµÙ„
                        </div>
                    </div>
                </div>
                <button onclick="toggleAI()" class="text-slate-400 hover:text-white transition">âœ•</button>
            </div>
            <div id="aiChatBox" class="flex-1 overflow-y-auto p-4 space-y-4">
                <div class="flex gap-3">
                    <div
                        class="w-8 h-8 rounded-full bg-gradient-to-br from-indigo-600 to-purple-600 flex items-center justify-center shrink-0">
                        ğŸ§ª</div>
                    <div
                        class="bg-slate-800 text-slate-200 p-3 rounded-2xl rounded-tr-sm text-sm border border-slate-700 leading-relaxed">
                        Ø£Ù‡Ù„Ø§Ù‹ ÙŠØ§ Ø¯ÙƒØªÙˆØ±! ğŸ‘‹ Ø£Ù†Ø§ Ø¯Ø§Ù„ØªÙˆÙ†ØŒ Ù…Ø¹Ø§Ùƒ Ù‡Ù†Ø§ Ø¹Ø´Ø§Ù† Ù†Ø¨Ø³Ø· Ù‚ÙˆØ§Ù†ÙŠÙ† Ø§Ù„Ø³ÙˆØ§Ø¦Ù„ ÙˆØ§Ù„Ø¶ØºØ· Ø³ÙˆØ§. Ø§Ø³Ø£Ù„ Ø§Ù„Ù„ÙŠ ÙˆØ§Ù‚Ù
                        Ù…Ø¹Ø§Ùƒ.
                    </div>
                </div>
            </div>
            <div class="p-4 border-t border-slate-700 bg-slate-900">
                <div class="flex gap-2">
                    <input type="text" id="aiInput" placeholder="Ø§Ø³Ø£Ù„ Ø¯Ø§Ù„ØªÙˆÙ†..."
                        class="flex-1 bg-slate-800 border border-slate-600 rounded-xl px-4 py-3 text-sm text-white focus:border-indigo-500 outline-none transition">
                    <button onclick="sendAI()"
                        class="bg-indigo-600 hover:bg-indigo-500 text-white p-3 rounded-xl transition shadow-lg shadow-indigo-500/20">ğŸ§ª</button>
                    <button onclick="clearChat()"
                        class="bg-red-600/20 hover:bg-red-600 text-red-400 hover:text-white p-3 rounded-xl transition"
                        title="Ù…Ø³Ø­">ğŸ—‘ï¸</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const OPENROUTER_API_KEY = 'sk-or-v1-' + 'beac3d30dcdb22761e6bb4f342edf6079' + '2f9649bdaedd66620871dd9d72e7fa2';
        const SYSTEM_PROMPT = `Ø£Ù†Øª "Ø¯Ø§Ù„ØªÙˆÙ† ğŸ§ª"ØŒ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ Ù„Ù…Ø§Ø¯Ø© Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡ ÙÙŠ "Ù…Ù†ØµØ© Ù…ØµØ·ÙÙ‰ Ù‡Ø§Ù†ÙŠ Ø­Ø¬Ø§Ø¬". 
        Ø§Ø´Ø±Ø­ Ø¨Ø¨Ø³Ø§Ø·Ø© ÙˆØ¨Ø§Ù„Ù…ØµØ±ÙŠ. Ø±ÙƒØ² Ø¹Ù„Ù‰ ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ø¶ØºØ· ÙˆÙ‚Ø§Ø¹Ø¯Ø© Ø¨Ø§Ø³ÙƒØ§Ù„ ÙˆØ§Ù„Ù…ÙƒØ¨Ø³ Ø§Ù„Ù‡ÙŠØ¯Ø±ÙˆÙ„ÙŠÙƒÙŠ. Ø£Ø¬Ø¨ Ø¨Ø£Ø³Ù„ÙˆØ¨ Ù…Ø´Ø¬Ø¹ ÙˆØ§Ø³ØªØ®Ø¯Ù… "ÙŠØ§ Ø¯ÙƒØªÙˆØ±". Ø§Ø³ØªØ®Ø¯Ù… MathJax Ù„Ùˆ Ù…ØªØ§Ø­ Ù„Ù„ØªÙ†Ø³ÙŠÙ‚.`;

        let aiHistory = [];
        const CHAT_STORAGE_KEY = 'chat_history_phys_f3';

        function toggleAI() { document.getElementById('aiSidebar').classList.toggle('-translate-x-full'); }
        function askAI(q) { toggleAI(); document.getElementById('aiInput').value = q; document.getElementById('aiInput').focus(); }

        function clearChat() {
            if (!confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ù…Ø³Ø­ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©ØŸ')) return;
            localStorage.removeItem(CHAT_STORAGE_KEY);
            aiHistory = [];
            document.getElementById('aiChatBox').innerHTML = `
                <div class="flex gap-3">
                    <div class="w-8 h-8 rounded-full bg-gradient-to-br from-indigo-600 to-purple-600 flex items-center justify-center shrink-0">ğŸ§ª</div>
                    <div class="bg-slate-800 text-slate-200 p-3 rounded-2xl rounded-tr-sm text-sm border border-slate-700 leading-relaxed">
                        Ø£Ù‡Ù„Ø§Ù‹ ÙŠØ§ Ø¯ÙƒØªÙˆØ±! ğŸ‘‹ Ø£Ù†Ø§ Ø¯Ø§Ù„ØªÙˆÙ†ØŒ Ù…Ø¹Ø§Ùƒ Ù‡Ù†Ø§ Ø¹Ø´Ø§Ù† Ù†Ø¨Ø³Ø· Ù‚ÙˆØ§Ù†ÙŠÙ† Ø§Ù„Ø³ÙˆØ§Ø¦Ù„ ÙˆØ§Ù„Ø¶ØºØ· Ø³ÙˆØ§. Ø§Ø³Ø£Ù„ Ø§Ù„Ù„ÙŠ ÙˆØ§Ù‚Ù Ù…Ø¹Ø§Ùƒ.
                    </div>
                </div>`;
        }

        function typeText(element, text) {
            let i = 0;
            element.innerHTML = '';
            const fmt = text.replace(/\*\*(.*?)\*\*/g, '<b class="text-yellow-400">$1</b>').replace(/\n/g, '<br>');
            const interval = setInterval(() => {
                if (i < fmt.length) {
                    element.innerHTML += fmt.charAt(i);
                    i++;
                    const box = document.getElementById('aiChatBox');
                    if (box) box.scrollTop = box.scrollHeight;
                } else {
                    clearInterval(interval);
                    if (window.MathJax) MathJax.typeset();
                }
            }, 10);
        }

        async function sendAI() {
            const inp = document.getElementById('aiInput');
            const txt = inp.value.trim();
            if (!txt) return;

            const box = document.getElementById('aiChatBox');
            box.innerHTML += `<div class="flex gap-3 flex-row-reverse mb-4 animate-fade-in"><div class="w-8 h-8 rounded-full bg-slate-700 flex items-center justify-center shrink-0">ğŸ‘¤</div><div class="bg-indigo-600 text-white p-3 rounded-2xl rounded-tl-sm text-sm">${txt}</div></div>`;
            inp.value = '';
            box.scrollTop = box.scrollHeight;

            const loadingId = 'load-' + Date.now();
            box.innerHTML += `<div id="${loadingId}" class="flex gap-3 mb-4 animate-fade-in">
                <div class="w-8 h-8 rounded-full bg-gradient-to-br from-indigo-600 to-purple-600 flex items-center justify-center shrink-0">ğŸ§ª</div>
                <div class="bg-slate-800 p-3 rounded-2xl flex gap-1 items-center border border-slate-700">
                    <div class="typing-dot"></div><div class="typing-dot"></div><div class="typing-dot"></div>
                </div>
            </div>`;
            box.scrollTop = box.scrollHeight;

            aiHistory.push({ role: "user", content: txt });
            localStorage.setItem(CHAT_STORAGE_KEY, JSON.stringify(aiHistory));

            try {
                const res = await fetch('https://openrouter.ai/api/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${OPENROUTER_API_KEY}`,
                        'Content-Type': 'application/json',
                        'HTTP-Referer': window.location.href,
                        'X-Title': 'Physics Lesson'
                    },
                    body: JSON.stringify({ model: 'deepseek/deepseek-r1', messages: [{ role: "system", content: SYSTEM_PROMPT }, ...aiHistory] })
                });

                if (!res.ok) throw new Error(`Server Error (${res.status})`);
                const data = await res.json();
                if (data.error) throw new Error(data.error.message);

                const reply = data.choices?.[0]?.message?.content || "Ø¹Ø°Ø±Ø§Ù‹ ÙŠØ§ Ø¯ÙƒØªÙˆØ±ØŒ Ø­ØµÙ„ Ø®Ø·Ø£. Ø­Ø§ÙˆÙ„ Ù…Ù† Ø¬Ø¯ÙŠØ¯.";
                document.getElementById(loadingId).remove();

                const resId = 'r-' + Date.now();
                box.innerHTML += `<div class="flex gap-3 mb-4 animate-fade-in">
                    <div class="w-8 h-8 rounded-full bg-gradient-to-br from-indigo-600 to-purple-600 flex items-center justify-center shrink-0">ğŸ§ª</div>
                    <div class="bg-slate-800 text-slate-200 p-3 rounded-2xl rounded-tr-sm text-sm border border-slate-700 leading-relaxed" id="${resId}"></div>
                </div>`;

                aiHistory.push({ role: "assistant", content: reply });
                localStorage.setItem(CHAT_STORAGE_KEY, JSON.stringify(aiHistory));
                typeText(document.getElementById(resId), reply);

            } catch (e) {
                console.error(e);
                const errorMsg = e.message.includes('fetch') ? 'Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„Ø§Ù†ØªØ±Ù†Øª' : e.message;
                const loadEl = document.getElementById(loadingId);
                if (loadEl) loadEl.innerHTML = `<div class="text-red-400 text-xs p-2 bg-red-900/20 rounded">âŒ Ø®Ø·Ø£: ${errorMsg}</div>`;
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            const saved = localStorage.getItem(CHAT_STORAGE_KEY);
            if (saved) {
                try {
                    aiHistory = JSON.parse(saved);
                    const box = document.getElementById('aiChatBox');
                    aiHistory.forEach(msg => {
                        if (msg.role === 'user') {
                            box.innerHTML += `<div class="flex gap-3 flex-row-reverse mb-4 animate-fade-in"><div class="w-8 h-8 rounded-full bg-slate-700 flex items-center justify-center shrink-0">ğŸ‘¤</div><div class="bg-indigo-600 text-white p-3 rounded-2xl rounded-tl-sm text-sm">${msg.content}</div></div>`;
                        } else if (msg.role === 'assistant') {
                            box.innerHTML += `<div class="flex gap-3 mb-4 animate-fade-in"><div class="w-8 h-8 rounded-full bg-gradient-to-br from-indigo-600 to-purple-600 flex items-center justify-center shrink-0">ğŸ§ª</div><div class="bg-slate-800 text-slate-200 p-3 rounded-2xl rounded-tr-sm text-sm border border-slate-700 leading-relaxed">${msg.content}</div></div>`;
                        }
                    });
                    box.scrollTop = box.scrollHeight;
                } catch (e) { }
            }
        });

        document.getElementById('aiInput')?.addEventListener('keypress', (e) => { if (e.key === 'Enter') sendAI(); });
    </script>
</body>

</html>
